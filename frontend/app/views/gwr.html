<div class="panel" id="gwr" ng-controller="GwrCtrl"> 
  <h1>Geographically Weighted Regression</h1>
  <form role="form">
    <div class="form-group">
      <label for="">Select Layer:</label>
      <select class="form-control" ng-model="regressionLayer">
        <option ng-repeat="(key, value) in data" value="{{$index}}">{{value.name | stripUnique}}</option>
      </select>
    </div>

    <div class="form-group" ng-show="regressionLayer >= 0">
      <label for="">Select Dependent Variable:</label>
      <select ng-model="dependentVariable" class="form-control">
        <option ng-hide="var === '$$hashKey'" ng-repeat="var in variables">{{var}}</option>
      </select>
    </div>

    <div class="form-group" ng-show="regressionLayer >= 0">
      <label for="">Select Independent Variable:</label>
      <select ng-model="independentVariable" id="textarea-independent" multiple class="form-control">
        <option ng-hide="var === '$$hashKey'" ng-repeat="var in variables">{{var}}</option>
      </select>
    </div>

    <div ng-hide="running" class="form-group" ng-show="regressionLayer >= 0">
      <button class="btn btn-sm btn-success" ng-click="initGWR()">Execute</button>
    </div>
  </form>

  <progressbar ng-show="flags.running" class="progress-striped active" value="100">Processing your request...</progressbar>
  
  <div ng-show="chloroVars">
    <h2>Select Choropleth Variable</h2>
    <div class="form-group">
      <select class="form-control" ng-model="chloroVal">
        <option ng-repeat="v in chloroVars">{{v}}</option>
      </select>
    </div>

    <div class="form-group">
      <button class="btn btn-sm btn-success" ng-click="setChloro()">Plot</button>
    </div>
  </div>
</div>