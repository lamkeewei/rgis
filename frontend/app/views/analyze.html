<div class="full-container">
  <div map data="mapLayers" config="config" flag="flag" id="map">
    <div sidebar id="sidebar">
        <div class="navigation">
          <div tooltip-placement="left" tooltip="Visualize the data" panel="settings" slide-trigger="1" class="plugin-selector">
            <span class="icon glyphicon glyphicon-eye-open"></span><br/>
            MAP
          </div>
          <div tooltip-placement="left" tooltip="Color settings" panel="style" slide-trigger="2" class="plugin-selector">
            <span class="icon glyphicon glyphicon-tint"></span><br/>
            STYLE
          </div>
          <div tooltip-placement="left" tooltip="Kernel density estimation" panel="kfunction" slide-trigger="2" class="plugin-selector">
            <span class="icon glyphicon glyphicon-fire"></span><br/>
            KDE
          </div>
          <div tooltip-placement="left" tooltip="Geographically weighted regression" panel="gwr" slide-trigger="3" class="plugin-selector">
            <span class="icon glyphicon glyphicon-signal"></span><br/>
            GWR
          </div>
          <!--
          <div slide-trigger="4" class="plugin-selector">
            <span class="icon glyphicon glyphicon-plus"></span><br/>
            ADD
          </div>
          -->
        </div>
        <div class="plugin-input">
          <div class="panel" id="settings">
            <h1>Visualize</h1>
            <ul id="layers-control">
              <li ng-show="data.length === 0" class="text-center">You have no data layers</li>
              <li ng-repeat="(key, value) in data">
                <button ng-class="{'btn-primary': isActive($index)}" ng-click="addLayer($index)" class="btn btn-default btn-block">
                  {{value.name}}
                </button>
              </li>
            </ul>
            <a href="#" class="btn btn-block btn-default">Add New Layer</a>
          </div>

          <div class="panel" id="style">
            <h1>Color Settings</h1>

            <h2>KDE Style Settings</h2>
            <div class="form-group">
              <label class="control-label">Color Scheme:</label>
              <select ng-model="kdeColor" class="form-control">
                <option ng-repeat="v in cb">{{v}}</option>
              </select>
            </div>

            <div class="form-group">
              <label class="control-label">Number of classes:</label>
              <select ng-model="kdeClass" class="form-control">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
                <option>9</option>            
              </select>
            </div>

            <h2>GWR Style Settings</h2>
            <div class="form-group">
              <label class="control-label">Color Scheme:</label>
              <select ng-model="gwrColor" class="form-control">
                <option ng-repeat="v in cb">{{v}}</option>
              </select>
            </div>

            <div class="form-group">
              <label class="control-label">Number of classes:</label>
              <select ng-model="gwrClass" class="form-control">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
                <option>9</option>            
              </select>
            </div>
          </div>

          <div class="panel" id="kfunction">
            <h1>Kernel Density Estimation</h1>
            <form role="form">
              <div class="form-group">
                <label for="">Select Point Layer:</label>
                <select ng-model="point" class="form-control">
                  <option ng-repeat="(key, value) in data">{{value.name}}</option>
                </select>
              </div>

              <div class="form-group">
                <label for="">Select Window Layer:</label>
                <select ng-model="window" class="form-control">
                  <option ng-repeat="(key, value) in data">{{value.name}}</option>
                </select>
              </div>

              <div class="form-group" ng-hide="running">
                <button class="btn btn-sm btn-success" ng-click="initKFunction()">Plot Graph</button>
              </div>
            </form>

            <progressbar ng-show="running" class="progress-striped active" value="100">Processing your request...</progressbar>
            <div id="plot" plot-area data="graph" callback="calcKDE(val)"></div>
          </div>
          
          <div class="panel" id="gwr"> 
            <h1>Geographically Weighted Regression</h1>
            <form role="form">
              <div class="form-group">
                <label for="">Select Layer:</label>
                <select class="form-control" ng-model="regressionLayer">
                  <option ng-repeat="(key, value) in data" value="{{$index}}">{{value.name}}</option>
                </select>
              </div>

              <div class="form-group" ng-show="regressionLayer >= 0">
                <label for="">Select Dependent Variable:</label>
                <select ng-model="dependentVariable" class="form-control">
                  <option ng-hide="var === '$$hashKey'" ng-repeat="var in variables">{{var}}</option>
                </select>
              </div>

              <div class="form-group" ng-show="regressionLayer >= 0">
                <label for="">Select Independent Variable:</label>
                <select ng-model="independentVariable" id="textarea-independent" multiple class="form-control">
                  <option ng-hide="var === '$$hashKey'" ng-repeat="var in variables">{{var}}</option>
                </select>
              </div>

              <div ng-hide="running" class="form-group" ng-show="regressionLayer >= 0">
                <button class="btn btn-sm btn-success" ng-click="initGWR()">Execute</button>
              </div>
            </form>

            <progressbar ng-show="running" class="progress-striped active" value="100">Processing your request...</progressbar>
            
            <div ng-show="chloroVars">
              <h2>Select Chloropleth Variable</h2>
              <div class="form-group">
                <select class="form-control" ng-model="chloroVal">
                  <option ng-repeat="v in chloroVars">{{v}}</option>
                </select>
              </div>

              <div class="form-group">
                <button class="btn btn-sm btn-success" ng-click="setChloro()">Plot</button>
              </div>
            </div>
          </div>
      </div>
    </div>
  </div>
</div>
